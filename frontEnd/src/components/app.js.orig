import React, {Component} from 'react';
import Proyectos from './proyecto/proyectos';
import Navib from './navbar';
import About from './about';
import axios from 'axios';


class App extends Component {

  constructor(props) {
    super(props);

    this.state = {
      proyectos: []
    }
    this.getProyectos();
  }

  buscarProyectos(term){

    axios.get(process.env.BACK_URL+ "/projects",{
      params:{
        "term":term
      }
    })
    .then(response => {
      console.log(response);
      this.setState({
        proyectos: response.data.projects
      })
    })
  }

  buscarAdv(terms){
    console.log(terms);
    axios.get(process.env.BACK_URL+"/projects",{params:terms})
    .then(response=>{
      this.setState({
        proyectos: response.data.projects
      })
    })
  }

  getProyectos(){
    console.log(process.env.BACK_URL)
    axios.get(process.env.BACK_URL+ "/projects")
    .then(response => {
      console.log(response);
      this.setState({
        proyectos: response.data.projects
      })
    })
  }

  addProject(project){
    axios.post(process.env.BACK_URL+ "/projects",project)
    .then(response => {
      console.log(response);
      this.state.proyectos.push(response.data.project.ops[0]);
      this.setState({proyectos:this.state.proyectos});
      console.log(this.state.proyectos);
    })
  }

  buscarAdv(body) {
    axios.get(process.env.BACK_URL+'/advanced', body)
    .then(response =>{
        this.setState({
          proyectos: response.data.projects
        })
    })

  }

  render(){
    return(
      <div>
        <Navib buscar={this.buscarProyectos.bind(this)} addProject={this.addProject.bind(this)} buscarAdv={this.buscarAdv.bind(this)}/>
        <About/>
<<<<<<< HEAD
        <Proyectos proyectos={this.state.proyectos} buscarAdv={this.buscarAdv.bind(this)}/>
=======
        <Proyectos buscarAdv={this.buscarAdv.bind(this)} proyectos={this.state.proyectos}/>
>>>>>>> a6e4d361dbfe7a54160560d2e6a699edfb544224
      </div>
    )

  }
}

export default App;

/*
{
  id:1,
  name: "Mi primer proyecto",
  summary: "soy lo mega max",
  description: "Me gustaria que todos me ayudaran en mi proyecto que busca ser un proyecto chevere e innorvador",
  collaborator:"que sepa coser que sepa cantar",
  img: null,
  repo: {
    url:"http://github.com/cgarciahdez/cgarciahdez.github.io",
    stars:3,
    watches:5,
    forks:2,
    issues:1,
    language: "JavaScript"
  },
  webpage: "http://example.com",
  comments:[{text:"wash me encata"},{text:"que es esto tan play"},{text:"wow esta pesimo"}],
  author: "YO",
  ratings:[3.5]
},
{
  id:2,
  name: "Mi segundo proyecto",
  summary: "soy lo mega max",
  description: "Me gustaria que todos me ayudaran en mi proyecto que busca ser un proyecto chevere e innorvador",
  img: null,
  repo: {
    url:"http://github.com/cgarciahdez/cgarciahdez.github.io",
    stars:8,
    watches:5,
    forks:4,
    language: "Python"
  },
  webpage: "",
  comments:[{text:"wash me encata"},{text:"que es esto tan play"},{text:"wow esta pesimo"}],
  author: "Camis",
  ratings:[4.5]
},
{
  id:3,
  name: "Mi segundo proyecto",
  summary: "soy lo mega max",
  description: "Me gustaria que todos me ayudaran en mi proyecto que busca ser un proyecto chevere e innorvador",
  img: null,
  repo: {
    url:"http://github.com/cgarciahdez/cgarciahdez.github.io",
    stars:8,
    watches:5,
    forks:4,
    language: "Python"
  },
  webpage: "http://example.com",
  comments:[{text:"wash me encata"},{text:"que es esto tan play"},{text:"wow esta pesimo"}],
  author: "Camis",
  ratings:[3.5]
},
{
  id:4,
  name: "Mi segundo proyecto",
  summary: "soy lo mega max",
  description: "Me gustaria que todos me ayudaran en mi proyecto que busca ser un proyecto chevere e innorvador",
  img: null,
  repo: {
    url:"http://github.com/cgarciahdez/cgarciahdez.github.io",
    stars:8,
    watches:5,
    forks:4,
    language: "Python"
  },
  webpage: "http://example.com",
  comments:[{text:"wash me encata"},{text:"que es esto tan play"},{text:"wow esta pesimo"}],
  author: "Cami",
  ratings:[2]
}*/
